<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ulug' Nor Takm Kutubxonasi</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
        }
        
        .hero-section {
            background: linear-gradient(rgba(44, 62, 80, 0.8), rgba(44, 62, 80, 0.9)), url('https://images.unsplash.com/photo-1507842217343-583bb7270b66?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 100px 0;
            margin-bottom: 50px;
        }
        
        .section-title {
            position: relative;
            padding-bottom: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background-color: var(--secondary-color);
        }
        
        .news-card, .event-card, .book-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            height: 100%;
            border: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .news-card:hover, .event-card:hover, .book-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }
        
        .news-image, .event-image, .book-image {
            height: 200px;
            object-fit: cover;
            width: 100%;
        }
        
        .book-image {
            height: 250px;
        }
        
        .badge-custom {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .footer {
            background-color: var(--primary-color);
            color: white;
            padding: 40px 0;
            margin-top: 50px;
        }
        
        .footer a {
            color: var(--light-color);
            text-decoration: none;
        }
        
        .footer a:hover {
            color: var(--secondary-color);
        }
        
        .loading {
            text-align: center;
            padding: 50px;
        }
        
        .loading-spinner {
            width: 3rem;
            height: 3rem;
        }
        
        .empty-message {
            text-align: center;
            padding: 50px;
            color: #777;
        }
        
        .category-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .stats-card {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .stats-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stats-label {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        @media (max-width: 768px) {
            .hero-section {
                padding: 60px 0;
            }
            
            .hero-section h1 {
                font-size: 2rem;
            }
        }
        
        .modal-image {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-book-open me-2"></i>Ulug' Nor Takm
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#news">Yangiliklar</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#events">Tadbirlar</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#books">Kitoblar</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">Biz haqimizda</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">Aloqa</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto text-center">
                    <h1 class="display-4 fw-bold mb-4">Ulug' Nor Takm Kutubxonasi</h1>
                    <p class="lead mb-4">Bilim manbai, madaniyat markazi, tafakkur o'chog'i</p>
                    <div class="row mt-5">
                        <div class="col-md-4">
                            <div class="stats-card">
                                <div class="stats-number" id="news-count">0</div>
                                <div class="stats-label">Yangiliklar</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stats-card">
                                <div class="stats-number" id="events-count">0</div>
                                <div class="stats-label">Tadbirlar</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stats-card">
                                <div class="stats-number" id="books-count">0</div>
                                <div class="stats-label">Kitoblar</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- News Section -->
    <section id="news" class="py-5">
        <div class="container">
            <h2 class="section-title">Yangiliklar</h2>
            <div id="news-loading" class="loading">
                <div class="spinner-border loading-spinner text-primary" role="status">
                    <span class="visually-hidden">Yuklanmoqda...</span>
                </div>
                <p class="mt-3">Yangiliklar yuklanmoqda...</p>
            </div>
            <div id="news-container" class="row">
                <!-- News cards will be loaded here -->
            </div>
            <div id="news-empty" class="empty-message d-none">
                <i class="fas fa-newspaper fa-3x mb-3"></i>
                <h4>Hozircha yangiliklar mavjud emas</h4>
                <p>Tez orada yangiliklar qo'shiladi</p>
            </div>
        </div>
    </section>

    <!-- Events Section -->
    <section id="events" class="py-5 bg-light">
        <div class="container">
            <h2 class="section-title">Yaqinlashayotgan Tadbirlar</h2>
            <div id="events-loading" class="loading">
                <div class="spinner-border loading-spinner text-primary" role="status">
                    <span class="visually-hidden">Yuklanmoqda...</span>
                </div>
                <p class="mt-3">Tadbirlar yuklanmoqda...</p>
            </div>
            <div id="events-container" class="row">
                <!-- Event cards will be loaded here -->
            </div>
            <div id="events-empty" class="empty-message d-none">
                <i class="fas fa-calendar-alt fa-3x mb-3"></i>
                <h4>Hozircha tadbirlar mavjud emas</h4>
                <p>Yaqin orada yangi tadbirlar e'lon qilinadi</p>
            </div>
        </div>
    </section>

    <!-- Books Section -->
    <section id="books" class="py-5">
        <div class="container">
            <h2 class="section-title">Kitoblar Katalogi</h2>
            <div id="books-loading" class="loading">
                <div class="spinner-border loading-spinner text-primary" role="status">
                    <span class="visually-hidden">Yuklanmoqda...</span>
                </div>
                <p class="mt-3">Kitoblar yuklanmoqda...</p>
            </div>
            <div id="books-container" class="row">
                <!-- Book cards will be loaded here -->
            </div>
            <div id="books-empty" class="empty-message d-none">
                <i class="fas fa-book fa-3x mb-3"></i>
                <h4>Hozircha kitoblar mavjud emas</h4>
                <p>Tez orada kitoblar katalogi to'ldiriladi</p>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-5 bg-light">
        <div class="container">
            <h2 class="section-title">Biz Haqimizda</h2>
            <div class="row">
                <div class="col-lg-6">
                    <h3>Ulug' Nor Takm Kutubxonasi</h3>
                    <p>Bizning kutubxona zamonaviy axborot resurslari va an'anaviy kitoblar uyg'unligini taqdim etadi. O'quvchilarimizga qulay sharoitda ta'lim olish, tadqiqot olib borish va kitoblar bilan tanishish imkoniyatini yaratamiz.</p>
                    <p>Har yili minglab o'quvchilar va tadqiqotchilar bizning kutubxonamizdan foydalanadi. Zamonaviy texnologiyalar yordamida elektron kutubxona xizmatlari ham taklif etilmoqda.</p>
                </div>
                <div class="col-lg-6">
                    <h3>Bizning Maqsadlarimiz</h3>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item bg-transparent"><i class="fas fa-check-circle text-success me-2"></i>O'quvchilarga eng yaxshi resurslarni taqdim etish</li>
                        <li class="list-group-item bg-transparent"><i class="fas fa-check-circle text-success me-2"></i>Zamonaviy axborot texnologiyalarini joriy etish</li>
                        <li class="list-group-item bg-transparent"><i class="fas fa-check-circle text-success me-2"></i>Kitobxonlik madaniyatini rivojlantirish</li>
                        <li class="list-group-item bg-transparent"><i class="fas fa-check-circle text-success me-2"></i>Ilmiy va madaniy tadbirlarni tashkil etish</li>
                        <li class="list-group-item bg-transparent"><i class="fas fa-check-circle text-success me-2"></i>Hammaga ochiq va qulay muhit yaratish</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-5">
        <div class="container">
            <h2 class="section-title">Aloqa</h2>
            <div class="row">
                <div class="col-lg-6">
                    <h4>Manzilimiz</h4>
                    <p><i class="fas fa-map-marker-alt text-primary me-2"></i> Toshkent shahri, Yunusobod tumani</p>
                    <p><i class="fas fa-clock text-primary me-2"></i> Ish vaqti: Dushanba - Juma, 9:00 - 18:00</p>
                    <p><i class="fas fa-phone text-primary me-2"></i> Telefon: +998 71 123 45 67</p>
                    <p><i class="fas fa-envelope text-primary me-2"></i> Email: info@ulugnortakm.uz</p>
                    
                    <h4 class="mt-4">Ijtimoiy Tarmoqlar</h4>
                    <div class="mt-3">
                        <a href="#" class="btn btn-outline-primary me-2"><i class="fab fa-telegram"></i> Telegram</a>
                        <a href="#" class="btn btn-outline-info me-2"><i class="fab fa-facebook"></i> Facebook</a>
                        <a href="#" class="btn btn-outline-danger"><i class="fab fa-instagram"></i> Instagram</a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <h4>Xabar Qoldiring</h4>
                    <form id="contact-form">
                        <div class="mb-3">
                            <input type="text" class="form-control" id="name" placeholder="Ismingiz" required>
                        </div>
                        <div class="mb-3">
                            <input type="email" class="form-control" id="email" placeholder="Email manzilingiz" required>
                        </div>
                        <div class="mb-3">
                            <textarea class="form-control" id="message" rows="4" placeholder="Xabaringiz" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Xabarni Yuborish</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <h5>Ulug' Nor Takm Kutubxonasi</h5>
                    <p>Bilim - kelajagimiz kaliti. Har bir inson o'qishi kerak, har bir kitob o'qilishi kerak.</p>
                </div>
                <div class="col-lg-4">
                    <h5>Tez Havolalar</h5>
                    <ul class="list-unstyled">
                        <li><a href="#news">Yangiliklar</a></li>
                        <li><a href="#events">Tadbirlar</a></li>
                        <li><a href="#books">Kitoblar</a></li>
                        <li><a href="#about">Biz haqimizda</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h5>Botimizga Obuna Bo'ling</h5>
                    <p>Telegram botimiz orqali yangiliklardan xabardor bo'ling</p>
                    <a href="https://t.me/ulugnortakm_bot" class="btn btn-outline-light" target="_blank">
                        <i class="fab fa-telegram me-2"></i> Telegram Bot
                    </a>
                </div>
            </div>
            <hr class="mt-4 mb-4">
            <div class="text-center">
                <p>&copy; 2025 Ulug' Nor Takm Kutubxonasi. Barcha huquqlar himoyalangan.</p>
                <p>GitHub Repository: <a href="https://github.com/ilhomjon1331-ops/ulugnortakm.uz" target="_blank">ilhomjon1331-ops/ulugnortakm.uz</a></p>
            </div>
        </div>
    </footer>

    <!-- News Modal -->
    <div class="modal fade" id="newsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newsModalTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <img id="newsModalImage" src="" class="modal-image d-none" alt="">
                    <div id="newsModalContent"></div>
                    <p class="text-muted mt-3"><small id="newsModalDate"></small></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Event Modal -->
    <div class="modal fade" id="eventModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="eventModalTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <img id="eventModalImage" src="" class="modal-image d-none" alt="">
                    <div id="eventModalContent"></div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <p><i class="fas fa-map-marker-alt text-primary me-2"></i> <strong>Joy:</strong> <span id="eventModalLocation"></span></p>
                            <p><i class="fas fa-calendar text-primary me-2"></i> <strong>Sana:</strong> <span id="eventModalDate"></span></p>
                        </div>
                        <div class="col-md-6">
                            <p><i class="fas fa-clock text-primary me-2"></i> <strong>Vaqt:</strong> <span id="eventModalTime"></span></p>
                            <p><i class="fas fa-users text-primary me-2"></i> <strong>Qatnashuvchilar:</strong> <span id="eventModalParticipants"></span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Book Modal -->
    <div class="modal fade" id="bookModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="bookModalTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4">
                            <img id="bookModalImage" src="" class="img-fluid rounded mb-3" alt="">
                        </div>
                        <div class="col-md-8">
                            <div id="bookModalContent"></div>
                            <div class="row mt-3">
                                <div class="col-6">
                                    <p><strong>Muallif:</strong> <span id="bookModalAuthor"></span></p>
                                    <p><strong>Janr:</strong> <span id="bookModalGenre"></span></p>
                                    <p><strong>Nashr yili:</strong> <span id="bookModalYear"></span></p>
                                </div>
                                <div class="col-6">
                                    <p><strong>ISBN:</strong> <span id="bookModalIsbn"></span></p>
                                    <p><strong>Sahifalar:</strong> <span id="bookModalPages"></span></p>
                                    <p><strong>Nusxalar:</strong> <span id="bookModalCopies"></span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // GitHub API ma'lumotlari
        const GITHUB_USER = "ilhomjon1331-ops";
        const GITHUB_REPO = "ulugnortakm.uz";
        const GITHUB_BRANCH = "main";
        
        // Fayl nomlari
        const NEWS_FILE = "news.json";
        const EVENTS_FILE = "events.json";
        const BOOKS_FILE = "books.json";
        
        // GitHub API URL
        function getFileUrl(fileName) {
            return `https://raw.githubusercontent.com/${GITHUB_USER}/${GITHUB_REPO}/${GITHUB_BRANCH}/${fileName}`;
        }
        
        // Asosiy yuklash funksiyasi
        async function loadData(fileName) {
            try {
                const response = await fetch(getFileUrl(fileName));
                if (!response.ok) {
                    throw new Error(`Fayl yuklashda xatolik: ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                console.error(`Xatolik ${fileName} yuklashda:`, error);
                return [];
            }
        }
        
        // Sahifani yuklash
        document.addEventListener('DOMContentLoaded', async function() {
            // Statistikani yangilash
            async function updateStats() {
                const news = await loadData(NEWS_FILE);
                const events = await loadData(EVENTS_FILE);
                const books = await loadData(BOOKS_FILE);
                
                document.getElementById('news-count').textContent = news.length;
                document.getElementById('events-count').textContent = events.length;
                document.getElementById('books-count').textContent = books.length;
            }
            
            // Yangiliklar yuklash
            async function loadNews() {
                const newsLoading = document.getElementById('news-loading');
                const newsContainer = document.getElementById('news-container');
                const newsEmpty = document.getElementById('news-empty');
                
                const news = await loadData(NEWS_FILE);
                
                newsLoading.style.display = 'none';
                
                if (news.length === 0) {
                    newsEmpty.classList.remove('d-none');
                    return;
                }
                
                // Eng yangi 6 ta yangilikni ko'rsatish
                const recentNews = news.slice(0, 6);
                
                recentNews.forEach(item => {
                    const newsCard = document.createElement('div');
                    newsCard.className = 'col-md-4 mb-4';
                    newsCard.innerHTML = `
                        <div class="card news-card h-100">
                            ${item.image ? `<img src="${item.image}" class="card-img-top news-image" alt="${item.title}">` : ''}
                            <div class="card-body">
                                <h5 class="card-title">${item.title}</h5>
                                <p class="card-text">${item.text.length > 100 ? item.text.substring(0, 100) + '...' : item.text}</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">${item.date}</small>
                                    <button class="btn btn-sm btn-primary" onclick="showNewsModal(${item.id})">Batafsil</button>
                                </div>
                            </div>
                        </div>
                    `;
                    newsContainer.appendChild(newsCard);
                });
            }
            
            // Tadbirlar yuklash
            async function loadEvents() {
                const eventsLoading = document.getElementById('events-loading');
                const eventsContainer = document.getElementById('events-container');
                const eventsEmpty = document.getElementById('events-empty');
                
                const events = await loadData(EVENTS_FILE);
                
                eventsLoading.style.display = 'none';
                
                if (events.length === 0) {
                    eventsEmpty.classList.remove('d-none');
                    return;
                }
                
                // Kelajakdagi tadbirlarni saralash (eng yaqin 6 tasi)
                const now = new Date();
                const futureEvents = events
                    .filter(event => new Date(event.date) >= now)
                    .sort((a, b) => new Date(a.date) - new Date(b.date))
                    .slice(0, 6);
                
                // Agar kelajakdagi tadbirlar bo'lmasa, so'nggi tadbirlarni ko'rsatish
                const eventsToShow = futureEvents.length > 0 ? futureEvents : events.slice(0, 6);
                
                eventsToShow.forEach(event => {
                    const eventCard = document.createElement('div');
                    eventCard.className = 'col-md-4 mb-4';
                    eventCard.innerHTML = `
                        <div class="card event-card h-100">
                            ${event.image ? `<img src="${event.image}" class="card-img-top event-image" alt="${event.title}">` : ''}
                            <div class="card-body">
                                <h5 class="card-title">${event.title}</h5>
                                <p class="card-text">${event.description.length > 100 ? event.description.substring(0, 100) + '...' : event.description}</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">${event.date}</small>
                                    <button class="btn btn-sm btn-primary" onclick="showEventModal(${event.id})">Batafsil</button>
                                </div>
                            </div>
                        </div>
                    `;
                    eventsContainer.appendChild(eventCard);
                });
            }
            
            // Kitoblar yuklash
            async function loadBooks() {
                const booksLoading = document.getElementById('books-loading');
                const booksContainer = document.getElementById('books-container');
                const booksEmpty = document.getElementById('books-empty');
                
                const books = await loadData(BOOKS_FILE);
                
                booksLoading.style.display = 'none';
                
                if (books.length === 0) {
                    booksEmpty.classList.remove('d-none');
                    return;
                }
                
                // Eng yangi 9 ta kitobni ko'rsatish
                const recentBooks = books.slice(0, 9);
                
                recentBooks.forEach(book => {
                    const bookCard = document.createElement('div');
                    bookCard.className = 'col-md-4 mb-4';
                    bookCard.innerHTML = `
                        <div class="card book-card h-100">
                            ${book.image ? `<img src="${book.image}" class="card-img-top book-image" alt="${book.title}">` : 
                              `<div class="book-image bg-light d-flex align-items-center justify-content-center">
                                <i class="fas fa-book fa-3x text-secondary"></i>
                              </div>`}
                            <div class="card-body">
                                <h5 class="card-title">${book.title}</h5>
                                <p class="card-text"><strong>Muallif:</strong> ${book.author}</p>
                                <p class="card-text"><strong>Janr:</strong> ${book.genre}</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">${book.year} yil</small>
                                    <button class="btn btn-sm btn-primary" onclick="showBookModal(${book.id})">Batafsil</button>
                                </div>
                            </div>
                        </div>
                    `;
                    booksContainer.appendChild(bookCard);
                });
            }
            
            // Modal funksiyalari
            window.showNewsModal = async function(newsId) {
                const news = await loadData(NEWS_FILE);
                const newsItem = news.find(item => item.id === newsId);
                
                if (newsItem) {
                    document.getElementById('newsModalTitle').textContent = newsItem.title;
                    
                    const imageElement = document.getElementById('newsModalImage');
                    if (newsItem.image) {
                        imageElement.src = newsItem.image;
                        imageElement.classList.remove('d-none');
                    } else {
                        imageElement.classList.add('d-none');
                    }
                    
                    document.getElementById('newsModalContent').innerHTML = newsItem.text;
                    document.getElementById('newsModalDate').textContent = `Sana: ${newsItem.date}`;
                    
                    const modal = new bootstrap.Modal(document.getElementById('newsModal'));
                    modal.show();
                }
            };
            
            window.showEventModal = async function(eventId) {
                const events = await loadData(EVENTS_FILE);
                const eventItem = events.find(item => item.id === eventId);
                
                if (eventItem) {
                    document.getElementById('eventModalTitle').textContent = eventItem.title;
                    
                    const imageElement = document.getElementById('eventModalImage');
                    if (eventItem.image) {
                        imageElement.src = eventItem.image;
                        imageElement.classList.remove('d-none');
                    } else {
                        imageElement.classList.add('d-none');
                    }
                    
                    document.getElementById('eventModalContent').innerHTML = eventItem.description;
                    document.getElementById('eventModalLocation').textContent = eventItem.location;
                    document.getElementById('eventModalDate').textContent = eventItem.date;
                    document.getElementById('eventModalTime').textContent = eventItem.time;
                    document.getElementById('eventModalParticipants').textContent = eventItem.participants;
                    
                    const modal = new bootstrap.Modal(document.getElementById('eventModal'));
                    modal.show();
                }
            };
            
            window.showBookModal = async function(bookId) {
                const books = await loadData(BOOKS_FILE);
                const bookItem = books.find(item => item.id === bookId);
                
                if (bookItem) {
                    document.getElementById('bookModalTitle').textContent = bookItem.title;
                    
                    const imageElement = document.getElementById('bookModalImage');
                    if (bookItem.image) {
                        imageElement.src = bookItem.image;
                    } else {
                        imageElement.src = 'https://via.placeholder.com/300x400?text=Kitob+Muqovasi';
                    }
                    
                    document.getElementById('bookModalContent').innerHTML = `<p>${bookItem.description}</p>`;
                    document.getElementById('bookModalAuthor').textContent = bookItem.author;
                    document.getElementById('bookModalGenre').textContent = bookItem.genre;
                    document.getElementById('bookModalYear').textContent = bookItem.year;
                    document.getElementById('bookModalIsbn').textContent = bookItem.isbn || "Mavjud emas";
                    document.getElementById('bookModalPages').textContent = bookItem.pages;
                    document.getElementById('bookModalCopies').textContent = bookItem.copies;
                    
                    const modal = new bootstrap.Modal(document.getElementById('bookModal'));
                    modal.show();
                }
            };
            
            // Aloqa formasi
            document.getElementById('contact-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const message = document.getElementById('message').value;
                
                // Bu yerda backend ga xabar yuborish kodi bo'lishi kerak
                // Hozircha oddiy alert ko'rsatamiz
                alert(`Hurmatli ${name}, xabaringiz qabul qilindi! Tez orada siz bilan aloqaga chiqamiz.`);
                
                // Formani tozalash
                document.getElementById('contact-form').reset();
            });
            
            // Barcha ma'lumotlarni yuklash
            await Promise.all([
                updateStats(),
                loadNews(),
                loadEvents(),
                loadBooks()
            ]);
        });
    </script>
</body>
</html>
